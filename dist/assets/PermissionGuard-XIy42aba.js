import{u as C,j as e,a1 as b,C as l,b as m,d as o,H as d,f as x,aT as h,aU as P,B as g}from"./index-Cp6MrUvh.js";const _=({children:a,permission:s,organizationId:i,fallback:t,showRequiredRole:j=!0})=>{const{hasPermission:u,userRole:n,isLoading:p,isAdmin:N,error:c}=C(i);if(p)return e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Checking permissions..."})]})});if(c)return console.error("Permission guard error:",c),e.jsxs(l,{className:"border-amber-200",children:[e.jsx(m,{children:e.jsxs(o,{className:"flex items-center text-amber-600",children:[e.jsx(d,{className:"w-5 h-5 mr-2"}),"Permission Check Failed"]})}),e.jsx(x,{children:e.jsx("p",{className:"text-sm text-gray-600",children:"Unable to verify permissions. Please refresh the page or contact support if the issue persists."})})]});if(N)return console.log("Permission granted via system admin privileges"),e.jsx(e.Fragment,{children:a});if(u(s))return console.log("Permission granted:",s),e.jsx(e.Fragment,{children:a});if(console.log("Permission denied:",{permission:s,userRole:n,organizationId:i}),t)return e.jsx(e.Fragment,{children:t});const f=w(s),{icon:v,label:y,variant:R}=h(f),r=n?h(n):null;return e.jsxs(l,{className:"border-red-200",children:[e.jsx(m,{children:e.jsxs(o,{className:"flex items-center text-red-600",children:[e.jsx(P,{className:"w-5 h-5 mr-2"}),"Access Restricted"]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"You don't have permission to access this feature."})]}),j&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Required role:"}),e.jsxs(g,{variant:R,className:"flex items-center gap-1",children:[e.jsx(v,{className:"w-3 h-3"}),y]})]}),r&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Your role:"}),e.jsxs(g,{variant:r.variant,className:"flex items-center gap-1",children:[e.jsx(r.icon,{className:"w-3 h-3"}),r.label]})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Contact your organization administrator to request access."})]})]})};function w(a){return{view_analytics:"viewer",export_data:"analyst",manage_questions:"analyst",manage_users:"manager",manage_integrations:"admin",manage_organization:"admin",manage_billing:"owner"}[a]||"admin"}export{_ as P};
